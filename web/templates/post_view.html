{{define "content"}}
  <article>
    <h1>{{.Post.Title}}</h1>

    <div class="post-tags">
      {{range .Post.Categories}}
        <span class="tag">#{{.}}</span>
      {{end}}
    </div>

    <p>{{.Post.Content}}</p>

    <div class="post-gallery" style="display: flex; flex-wrap  : wrap; gap: 15px; margin: 20px 0;">
      {{/* –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ */}}
      {{if .Post.ImageURL}}
        <img src="/{{.Post.ImageURL}}" alt="Main image" style="max-width: 45%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
      {{end}}

      {{/* –ó–∞—Ç–µ–º –≤—ã–≤–æ–¥–∏–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –∏–∑ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã */}}
      {{range .Post.Images}}
        <img src="/{{.}}" alt="Additional image" style="max-width: 45%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
      {{end}}
    </div>

    <hr>
    {{if .User}}
      {{if eq .User.ID .Post.UserID}}
        <a href="/post/edit?id={{.Post.ID}}">üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a> |
        <a href="/post/delete?id={{.Post.ID}}" style="color:red;" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
      {{end}}
    {{end}}
  </article>


  <div class="post-actions">
    <form action="/like" method="POST" style="display: inline;">
      <input type="hidden" name="target_id" value="{{.Post.ID}}">
      <input type="hidden" name="target_type" value="post">
      <input type="hidden" name="value" value="1">
      <button type="submit">üëç {{.Post.Likes}}</button>
    </form>

    <form action="/like" method="POST" style="display: inline;">
      <input type="hidden" name="target_id" value="{{.Post.ID}}">
      <input type="hidden" name="target_type" value="post">
      <input type="hidden" name="value" value="-1">
      <button type="submit">üëé {{.Post.Dislikes}}</button>
    </form>

    <span>–ê–≤—Ç–æ—Ä: {{.Post.AuthorName}}</span>
  </div>
  <hr>

  <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
  {{if .User}}
    <form action="/comment/create" method="POST">
      <input type="hidden" name="post_id" value="{{.Post.ID}}">
      <textarea name="content" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." required></textarea><br>
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  {{else}}
    <p><a href="/login">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏.</p>
  {{end}}

  {{range .Comments}}
    <div style="border-left: 2px solid #eee; padding-left: 10px; margin-top: 10px;">
      <p>{{.Content}}</p>
      <small>–ê–≤—Ç–æ—Ä: {{.AuthorName}} | üëç {{.Likes}} | üëé {{.Dislikes}}</small>

      {{if $.User}}
        <a href="/like?id={{.ID}}&type=comment&value=1">üëç</a>
        <a href="/like?id={{.ID}}&type=comment&value=-1">üëé</a>
        {{if eq $.User.ID .UserID}}
          | <a href="/comment/delete?id={{.ID}}" style="color: gray;">—É–¥–∞–ª–∏—Ç—å</a>
        {{end}}
      {{end}}
    </div>
  {{end}}
{{end}}
